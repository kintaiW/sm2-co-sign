# SM2 ååŒç­¾åé¡¹ç›®

åŸºäº SM2 å›½å¯†ç®—æ³•çš„ååŒç­¾åç³»ç»Ÿï¼Œé‡‡ç”¨å®¢æˆ·ç«¯-æœåŠ¡ç«¯åˆ†ç¦»æ¶æ„ï¼Œå®ç°å¯†é’¥åˆ†ç‰‡å­˜å‚¨å’ŒååŒç­¾å/è§£å¯†åŠŸèƒ½ã€‚

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
sm2-co-sign/
â”œâ”€â”€ backend/          # æœåŠ¡ç«¯ (Go) - Submodule
â”œâ”€â”€ client/           # å®¢æˆ·ç«¯ (Rust) - Submodule  
â”œâ”€â”€ frontend/         # Web ç®¡ç†ç•Œé¢ (React)
â”œâ”€â”€ docs/             # æŠ€æœ¯æ–‡æ¡£
â””â”€â”€ scripts/          # æµ‹è¯•è„šæœ¬
```

## ğŸ”— å­æ¨¡å—

| æ¨¡å— | ä»“åº“ | æŠ€æœ¯æ ˆ | æè¿° |
|------|------|--------|------|
| **backend** | [sm2-co-sign-server](https://github.com/kintaiW/sm2-co-sign-server) | Go 1.24 + Fiber v2 | ååŒç­¾åæœåŠ¡ç«¯ï¼Œæä¾› REST API |
| **client** | [sm2-co-sign-client](https://github.com/kintaiW/sm2-co-sign-client) | Rust 2021 + libsm | ååŒç­¾åå®¢æˆ·ç«¯ï¼Œæ”¯æŒ FFI æ¥å£ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å…‹éš†ä»“åº“ï¼ˆåŒ…å«å­æ¨¡å—ï¼‰

```bash
git clone --recursive https://github.com/kintaiW/sm2-co-sign.git
# æˆ–
git clone https://github.com/kintaiW/sm2-co-sign.git
cd sm2-co-sign
git submodule update --init --recursive
```

### å¯åŠ¨æœåŠ¡ç«¯

```bash
cd backend
go mod tidy
go run cmd/server/main.go
```

### æ„å»ºå®¢æˆ·ç«¯

```bash
cd client
cargo build --release
```

### å¯åŠ¨å‰ç«¯

```bash
cd frontend
npm install
npm run dev
```

## ğŸ“¡ API æ¥å£

### ä¸šåŠ¡æ¥å£ (/api/*)

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/register` | POST | ç”¨æˆ·æ³¨å†Œï¼ˆç”Ÿæˆå¯†é’¥å¯¹ï¼‰ |
| `/api/login` | POST | ç”¨æˆ·ç™»å½•ï¼ˆè·å– Tokenï¼‰ |
| `/api/sign` | POST | ååŒç­¾å |
| `/api/decrypt` | POST | ååŒè§£å¯† |

### ç®¡ç†æ¥å£ (/mapi/*)

| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/mapi/users` | GET | è·å–ç”¨æˆ·åˆ—è¡¨ |
| `/mapi/keys` | GET | è·å–å¯†é’¥åˆ—è¡¨ |
| `/mapi/logs` | GET | æŸ¥è¯¢å®¡è®¡æ—¥å¿— |
| `/mapi/health` | GET | å¥åº·æ£€æŸ¥ |

è¯¦ç»† API æ–‡æ¡£è¯·å‚è€ƒ [backend/docs/api.md](backend/docs/api.md)

## ğŸ” å®‰å…¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SM2 ååŒç­¾åæ¶æ„                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®¢æˆ·ç«¯ (D1)              æœåŠ¡ç«¯ (D2)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  d1     â”‚              â”‚  d2     â”‚                   â”‚
â”‚  â”‚ (ç§é’¥åˆ†é‡)â”‚              â”‚ (ç§é’¥åˆ†é‡)â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                   â”‚
â”‚       â”‚                        â”‚                        â”‚
â”‚       â–¼                        â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ P1=d1*G â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚ P2=d2â»Â¹*Gâ”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚       â”‚                        â”‚                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                â–¼                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚         â”‚ Pa = d2â»Â¹*P1 â”‚                                â”‚
â”‚         â”‚  + (n-1)*G  â”‚                                 â”‚
â”‚         â”‚  (ååŒå…¬é’¥)  â”‚                                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                         â”‚
â”‚  å®Œæ•´ç§é’¥: d = d1 * d2 - 1 (ä¸å­˜å‚¨)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

## ğŸ“š æ–‡æ¡£

- [æ¶æ„è®¾è®¡](docs/architecture.md)
- [API å‚è€ƒ](docs/api-reference.md)
- [é¡¹ç›®è®¡åˆ’](PROJECT_PLAN.md)
